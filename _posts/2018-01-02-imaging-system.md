---
layout: post
title: 光学成像系统中的像差与噪声
category: 知识整理
tags: 
  - imaging system
---

<style>
img{
    width: 60%;
    padding-left: 20%;
}
</style>

## 一、光学成像系统
在图像处理领域，我们所处理的图像往往都是由光学成像系统（如摄像头）所得到。

![光学成像系统][1]

如上图所示，这是一个简单的光学成像系统。光源照射在物体上，反射光进入光学系统成像，然后通过光电转换和模数转换形成图像数据用于之后的处理。

光学系统往往是一系列的透镜组合，但在理解相应的系统结构时，我们往往将其简化为一个单透镜的系统：

![双凸透镜成像][2]

上图便是一个简单的双凸透镜构成的光学成像系统。双凸透镜是指一块透镜的两面都是凸出来的，这样无论光从哪一边射入，透镜都会将光线汇聚起来。图中的O点是透镜的横截面的中心，图中的虚线是光学系统的**光轴**，光轴经过O点并与透镜垂直，我们可以理解为它是光学系统的旋转轴。图中的AB是我们要观察的物体，所在平面为**物平面**，A'B'是这个物体通过光学系统后所成的像，所在平面称为**像平面**。我们把物体所在的空间称之为**物空间**（透镜的左边），把所成的像所在的空间称之为**像空间**（透镜的右边）。物体AB到透镜的距离AO称为**物距 x**, 像A'B'到透镜的距离OA'称为**像距 x'**。 当一束平行于光轴的光从物空间射入像空间时，它会汇聚于F'点，称为**像方焦点**，如果光线方向相反，则会汇聚于F点，称为**物方焦点**。两个焦点到O点距离称为**像方焦距 f'**和**物方焦距f**。如果透镜的两个面是对称的，那么显然有f'=f。对于一个简单的成像系统，我们通常由如下关系：

$$\frac{1}{x}+\frac{1}{x'}=\frac{1}{f}$$

同时，我们也有：

$$FA \times F'A' = f^2$$

![光阑][3]

在成像系统中，因为透镜本身的大小，或者人为添加的一些限制，使得只有满足一定角度的光线才能通过光学系统进行成像。如上图中，便是人为放置了一个空心的挡光板，使得一部分光被挡住无法最终成像。每一块透镜或者挡光板都能对光线的角度进行限制，我们把对光线限制最大的透镜或者挡光板，称为系统的**光圈**，我们常用系统焦距与光圈直径的比值F数来表示系统光圈的大小 \\(F =f/D\\)。由于光阑的左右也存在透镜，我们可以认为光阑透过两方的的透镜在物空间和像空间各自形成了一个像，我们把它在物空间成的像称为**入瞳**，在像空间成的像称为**出瞳**，如果左/右没有透镜，那么入/出瞳就是光圈本身。我们可以看到，入瞳决定了进入光学系统的光线。

![孔径光阑与视场光阑][4]

光圈有时又称为光阑，按照不同的作用，我们将其分为孔径光阑(Aperture)和视场光阑(Field)。孔径光阑指的是入瞳的直径D或者是进入光阑的光线与光轴的最大夹角\\(\alpha\\),而视场光阑则代表成像区域的大小，用成像的区间大小y或是与区间角度\\(\theta\\)来表示。

在对图像的内容进行分析的时候（如人脸识别，3D重建等）我们认为所处理的图像是完美的，即所见即所得。然而，由于成像系统往往都存在着缺陷，我们得到的初始图像与现实会存在着一定的偏差。如何对这些图像进行预处理，需要我们对成像过程中产生的各类误差有着一定的了解。我们把由光学系统所引起的图像形状的改变称为**像差**，像差可以通过分析光学系统而得到，针对不同的成像，这一部分误差是可以确定的；除此之外，我们把其他一些妨碍信息接受的因素称为**噪声**，噪声在理论上是不可预测的，但我们可以得到它的概率统计分布。



## 二、像差
### 球差(Sperical aberration)
球差是指光轴上的物体或是一束平行入射光，在成像时接近中心与靠近边缘的光线不能聚焦在一个点上。下图中显示了理想光学成像系统与实际光学系统的光线轨迹。

![球差][5]

### 慧差(Coma)
与球差相似，慧差则是指光轴外的物体或是一束与光轴有一定夹角的入射光，在成像时不能汇聚于一点。

![慧差][6]

### 像散(Astigmatism)
像散的产生是由于光轴外的物点，在子午面（与纸面平行）的光线的焦点与在弧矢面（与纸面垂直）的光线的焦点并不重合。

![像散][7]

### 场曲(Sperical aberration)
场曲是由于物体经过光学系统成像后的聚焦并不位于一个平面，而是一个平面。场曲由Joseph  Petzval提出，所以又称为佩兹瓦尔像场弯曲。

![场曲][8]

### 畸变(Distorition)
畸变则是因为物体在距离光轴的距离不同时光学系统的放大率不一样，根据放大率的变化分为Barrel畸变（桶状畸变，放大率随距离递减）、Pincushion畸变（枕状畸变，放大率随距离递增）和Mustache畸变（以上两种畸变的融合）。

![畸变][9]

### 色散(Chromatic aberration)
色散是由物体不同波段的光在光学系统中的折射率不一样而引起，区别于以上五种单色光像差，色差往往单独考虑。

![色差][10]

PS：以上像差都有着严格的数学推导，但由于时间所限，暂时不展开讨论，先挖个坑，有时间了再来填 o(╯□╰)o

## 三、 噪声

对于数字图像传感器，一般会经历如下三个过程，第一步为光电转换，将射入传感器的光子转换为电子，第二步为电能-势能转换，将单位时间内转换的电子的多少转化为电压储存下来，第三部则是根据电压的多少，进行数模转换，将模拟电压信号转换为数字信号。在这一系列的转化过程中，由于系统的物理特性，会产生各种各样的噪声。

![digital image sensor][11]

### 散粒噪声（shot noise, photon noise, Poisson noise）
散粒噪声(shot noise)的产生，是由于在相同的光强下，由于采样时间较短，所以每一次采样传感器会接受到不同数量的光子，这一部分的噪声服从泊松分布，又称为泊松噪声(Poisson noise)。其统计学规律如下：

$$P_N(n)=exp[-\lambda]\frac{\lambda^n}{n!}$$

其中\\(\lambda\\)代表的是其统计平均值，其方差为\\(\sigma_N^2=\lambda\\)，泊松分布的信号的信噪比为  \\(\rho=\frac{E[N]^2}{\sigma_N^2} =\lambda\\).

### Speckle 噪声
Speckle 噪声的产生是由于在粗糙的表面的反射光产生了一定的相干作用而形成的斑点状噪声，常见于相干成像系统，如激光，SAR等。Speckle噪声在空间上服从指数分布：

$$P_X(x)=\frac{1}{m}exp(-\frac{x}{m})$$

其均值为\\(m\\)，方差为\\(m^2\\)，所以其信噪比为 \\(\rho=\frac{E[N]^2}{\sigma_N^2} =1\\).

### 暗电流(Dark noise)
暗电流来自于二极管中耗尽层中电子和空洞的随机产生，暗电流使得光电探测器在没有光照的时候，元件上仍然会产生微小的电流，暗电流本身属于一种散粒噪声。

### 探测器噪声(Detection noise)
图中的探测器噪声属于读出噪声(Readout noise)， 是在电子转换为电压的过程中由于电子的热运动而产生的一种噪声。读出噪声与进入探测器的光照强度无关，满足高斯分布：

$$P_X(x)=\frac{1}{\sqrt{2\pi}\sigma}exp\left[-\frac{x^2}{2\sigma^2}\right]$$

均值为\\(0\\)，方差为\\(\sigma^2\\)。

### 量化噪声(Quantization noise)
量化噪声是由于系统进行模数转换时，会将连续的信号进行离散的取值而产生的误差，一般用于衡量图像的分辨率。用于储存单个pixel信息的bits越高，则离散的取值越多，图像的精确度越高

## 四、总结
在图像处理中，我们通常会用到如下的成像系统模型：

$$y=h*x+b$$

其中x代表理想图像，y为实际所测得图像数据，h是一个卷积滤波器，与光学成像系统和光学衍射有关，b代表着系统的噪声。虽然绝大多数情况下这个模型并不完全正确，但更为复杂的模型将会意味着更为复杂的处理算法。简化的模型虽然牺牲了一定的精确度，但可以大大提高计算效率。

[1]: http://res.cloudinary.com/bxy1994/image/upload/v1514890547/ImageSystem_jzh41s.jpg
[2]: http://res.cloudinary.com/bxy1994/image/upload/v1514891870/lens_jmn1ts.jpg
[3]: http://res.cloudinary.com/bxy1994/image/upload/v1514896621/aperture_wpuh4x.jpg
[4]: http://res.cloudinary.com/bxy1994/image/upload/v1514904821/field-aperture_iuxq7i.jpg
[5]: http://res.cloudinary.com/bxy1994/image/upload/v1514906757/Spherical_aberration_vm8sdd.png
[6]: http://res.cloudinary.com/bxy1994/image/upload/v1514907448/coma_cl577q.png
[7]: http://res.cloudinary.com/bxy1994/image/upload/v1514907939/Astigmatism_tseog1.png
[8]: http://res.cloudinary.com/bxy1994/image/upload/v1514908250/curvature_yf5saz.png
[9]: http://res.cloudinary.com/bxy1994/image/upload/v1514908939/distorition_urfdlx.jpg
[10]: http://res.cloudinary.com/bxy1994/image/upload/v1514909089/Chromatic_aberration_ktynzx.png
[11]: http://res.cloudinary.com/bxy1994/image/upload/v1514909672/digital_image_sensor_c4xgza.jpg
